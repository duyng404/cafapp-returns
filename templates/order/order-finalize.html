{{ define "content" }}

{{ template "basicspotlight" . }}

<section class="container">
	<h2 class="text-center my-5"><strong>Finalize Order</strong></h2>
	<p class="lead text-center">Review and place your order below.</p>

	<div class="row justify-content-center mt-5">
		<div class="col-md-8 col-lg-6">
			{{ if .error }}
			<div class="alert alert-danger text-center" role="alert">
				{{ rawHTML .error }}
			</div>
			{{ end }}

			<hr />

			{{ range .order.OrderRows }}
				<div class="text-center mb-4">
					<div><h5>{{ .MenuItem.DisplayName }}</h5></div>
				</div>
				{{ range .SubRows }}
					{{ if .Product.IsMain }}
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h5 class="my-1">{{ .Product.DisplayName }}</h5>
							<p class="text-muted font-italic">Entree</p>
						</div>
						<div>
							<h5><strong>{{ formatMoney .Product.PriceInCents }}</strong></h5>
						</div>
					</div>
					{{ end }}
					{{ if .Product.IsSide }}
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h5 class="my-1">{{ .Product.DisplayName }}</h5>
							<p class="text-muted font-italic">Side</p>
						</div>
						<div>
							<h5><strong>{{ formatMoney .Product.PriceInCents }}</strong></h5>
						</div>
					</div>
					{{ end }}
					{{ if .Product.IsDrink }}
					<div class="d-flex justify-content-between align-items-center">
						<div>
							<h5 class="my-1">{{ .Product.DisplayName }}</h5>
							<p class="text-muted font-italic">Drink</p>
						</div>
						<div>
							<h5><strong>{{ formatMoney .Product.PriceInCents }}</strong></h5>
						</div>
					</div>
					{{ end }}
				{{ end }}
				<hr />
			{{ end }}

			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h5 class="my-1">Delivery Fee</h5>
				</div>
				<div>
					<h5 class="font-weight-bold">{{ formatMoney .order.DeliveryFeeInCents }}</h5>
				</div>
			</div>

			<hr />


			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h5 class="my-1 font-weight-bold text-ca-yellow2">Total</h5>
				</div>
				<div>
					<h5 class="font-weight-bold text-ca-yellow2">{{ formatMoney .order.TotalInCents }}</h5>
				</div>
			</div>

			<hr />

			<h4 class="text-center">Payment</h4>

			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h5 class="my-1">Meal Plan Charge</h5>
				</div>
				<div>
					<h5 class="font-weight-bold text-danger">{{ formatMoney .order.CafAccountChargeAmountInCents }}</h5>
				</div>
			</div>

			<div class="d-flex justify-content-between align-items-center">
				<div>
					<h5 class="my-1">CafApp Charge</h5>
				</div>
				<div>
					<h5 class="font-weight-bold text-danger">{{ formatMoney .order.DeliveryFeeInCents }}</h5>
				</div>
			</div>

			<hr />

			<p class="text-center">
				<span class="text-danger">Important:</span>
				Order will be delivered to {{ .destination }}<br />
				Pick Up Location: {{ .pickupspot }}</p>

			<hr />

			<h4 class="text-center">Disclaimer</h4>

			<p>By clicking Place Order, you agree to bla bla bla bla bla bla:</p>
			<ul>
				<li>bla</li>
				<li>bla</li>
				<li>bLAAAHHHH</li>
			</ul>
			<p>Thank you for using CafApp!</p>

			<div class="my-3"></div>

			<form class="needs-validation" action="" method="post" novalidate>
				<div class="form-group mb-2">
					<div class="form-check">
						<input class="form-check-input" type="checkbox" value="" id="disclaimer-agree" required>
						<label class="form-check-label" for="disclaimer-agree">
							I have fully read, understood and AGREE to this disclaimer as stated.
						</label>
						<div class="invalid-feedback">
							You must agree before placing order.
						</div>
					</div>
				</div>
				<button class="btn btn-primary btn-lg btn-block" type="submit">Place Order</button>
			</form>

			<div class="my-3"></div>

			<form action="" method="post">
				<input type="hidden" name="goToEdit" value="goToEdit" />
				<button class="btn btn-link btn-lg btn-block" type="submit">Or click here to edit your order</button>
			</form>

		</div>
	</div>
</section>

{{ end }}
{{ define "scripts" }}
<script>
// Example starter JavaScript for disabling form submissions if there are invalid fields
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.getElementsByClassName('needs-validation');
    // Loop over them and prevent submission
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();
</script>
{{ end }}
